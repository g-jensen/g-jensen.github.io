<head><title>Greg Jensen's Blog</title><link href="/styles.css" rel="stylesheet" type="text/css" /></head><body><div class="center"><a href="https://gregjensen.dev">Home</a><a href="https://gregjensen.dev/math.html">Math</a><a href="mailto:greg.micah.jensen@gmail.com">Email</a><a href="https://gregjensen.dev/blog">Blog</a><a href="https://www.github.com/g-jensen">GitHub</a></div><div class="post"><div><h1>REPL Environment</h1><p>2023-07-19</p><!---
Tags:
[:misc]
--><p>Today I created a REPL (Read, Evaluate, Print, Loop) environment for my <a href="https://gregjensen.dev/blog/2023/07/18/new-project.html">math language</a>
that I am making in Java. I simply have a Repl class with a constructor and methods corresponding to each word
in the acronym. At first, there was only one parameter for the constructor, a <code>Scanner</code>. But when I wanted
to test the <code>read()</code> method, I realized I would have to create a mock <code>Scanner</code> class which is actually
impossible because <code>Scanner</code> is a <code>final</code> class. This made me rethink and ultimately decide to have the constructor
take in an <code>InputStream</code> instead. This is good because I can now test <code>read()</code> by supplying the <code>InputStream</code> with bytes, and
I can also still take input from <code>System.in</code> because it is a type of <code>InputStream</code>. This also makes it possible
to read code in from a file, since <code>InputStream</code> could have data from a file. The story is very similar
with the <code>print()</code> method. At first, I wanted to just print to <code>System.out</code>, but I couldn't test this, so I instead
abstracted the functionality into a <code>PrintStream</code> that is passed into the constructor. This is a very
clean solution and results in a very nice one-liner <code>main</code> function:</p><pre><code class="language-java">public static void main(String[] args) throws IOException {
    new Repl(System.in,System.out).loop();
}
</code></pre><p>This experience shows how tests encourage you to depend on abstractions rather than concretions
and therefore writing cleaner code that adheres to the SOLID principles.</p></div></div></body>