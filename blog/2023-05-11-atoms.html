<head><title>Greg Jensen's Blog</title><link href="/styles.css" rel="stylesheet" type="text/css" /></head><body><div class="center"><a href="https://gregjensen.dev">Home</a><a href="https://gregjensen.dev/math.html">Math</a><a href="mailto:greg.micah.jensen@gmail.com">Email</a><a href="https://gregjensen.dev/blog">Blog</a><a href="https://www.github.com/g-jensen">GitHub</a></div><div class="post"><div><h1>Atoms in Clojure</h1><p>2023-05-11</p><!---
Tags:
[:clojure]
--><p>Atoms in Clojure are a way to create mutable state within a program.</p><p>To declare an atom, use the <code>atom</code> function</p><pre><code class="language-clojure">(def my-atom (atom 0))
</code></pre><p>To get the value of an atom, use <code>deref</code> or <code>@</code></p><pre><code class="language-clojure">(deref my-atom) ;=> 0
@my-atom ;=> 0
</code></pre><p>To modify the value stored in an atom, use <code>swap!</code></p><p><code>swap!</code>'s first parameter is the atom to be modified, followed by the
function to modify it by and the parameters to that function.</p><pre><code class="language-clojure">(swap! my-atom inc)
@my-atom ;=> 1
(swap! my-atom #(+ %1 %2) 4)
@my-atom ;=> 5
</code></pre><p>It is also possible to conditionally modify atoms with <code>compare-and-set!</code></p><p>Here, <code>my-atom</code> will only be changed if it is equal to the second parameter.</p><pre><code class="language-clojure">(compare-and-set! my-atom 6 100) ;=> false
@my-atom ;=> 5

(compare-and-set! my-atom 5 100) ;=> true
@my-atom ;=> 100
</code></pre></div></div></body>